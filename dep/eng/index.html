<!DOCTYPE html>
<html lang="en">
  <head>
    <!-- Global site tag (gtag.js) - Google Analytics -->
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-40932170-2"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'UA-40932170-2');
</script>

    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <!-- The above 3 meta tags *must* come first in the head; any other head content must come *after* these tags -->
    <title>KU NAI - Faculty of Engineering</title>

    <!-- Bootstrap -->
    <link href="https://fonts.googleapis.com/css?family=Kanit" rel="stylesheet">
    <link href="../../assets/css/bootstrap.min.css" rel="stylesheet">
    <link href="../../assets/css/dep.css" rel="stylesheet">
    <!-- HTML5 shim and Respond.js for IE8 support of HTML5 elements and media queries -->
    <!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
    <!--[if lt IE 9]>
      <script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
      <script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
    <![endif]-->
  </head>
  <body>
    <header id="top" class="header"></header>
    <div style="padding-bottom:15px;"></div>

    <blockquote style="padding-left: 10px;">
            <label style="font-size: 20px;"> | ตัวเลือกที่ 1 ></label>
    </blockquote>
    
    <!-- <div class="container"> -->
            <!-- <div class="row">
                    <div class="col-xs-7 col-md-7"> -->
<!--                     
                    </div>
                    <div class="col-xs-5 col-md-5"> -->
                            
                
                    <!-- </div>
                    
            </div>        
    </div> -->
    
    <div class="container">
    <p style="font-size: 18px;padding-left:3px;">เลือกอาคาร</p>
    <select class="form-control" id="ddlViewBy" onChange="changeOption()">
            <option selected="selected" value="#">เลือกอาคาร :</option>         
            <option value="0">อาคาร 1: อาคารเรียนและบริหาร </option>
            <option value="1">อาคาร 2: อาคารปฏิบัติการวิศวกรรมไฟฟ้า </option>
            <option value="2">อาคาร 3: อาคารเรียนคณะ </option>
            <option value="3">อาคาร 4: อาคารศูนย์คอมพิวเตอร์วิศวกรรม </option>
            <option value="4">อาคาร 5: อาคารปฏิบัติการวิศวกรรมเครื่องกล </option>
            <option value="5">อาคาร 6: อาคารปฏิบัติการยานยนต์ </option>
            <option value="6">อาคาร 7: อาคารปฏิบัติการวิศวกรรมอุตสาหการ </option>
            <option value="7">อาคาร 8: อาคารปฏิบัติการและวิจัย </option>
            <option value="8">อาคาร 9: อาคารบุญสมสุวชิรัตน์ อาคารปฏิบัติการวิศวกรรมโยธา </option>
            <option value="9">อาคาร 10: อาคารวัสดุธานี </option>
            <option value="10">อาคาร 11: วิศวกรรมสิ่งแวดล้อม อาคารชำนาญเพ็ญชาติ </option>
            <option value="11">อาคาร 12: อาคารวิศวกรรมสำรวจและบริหารการก่อสร้าง </option>
            <option value="12">อาคาร 13: อาคารปฏิบัติการวิศวกรรมทรัพยากรน้ำ </option>
            <option value="13">อาคาร 14: อาคารชูชาติกำภู อาคารวิศวกรรมศาสตร์ 60 ปี </option>
            <option value="14">อาคาร 15: อาคารปฏิบัติการคณะวิศวกรรมศาสตร์ </option>
            <option value="15">อาคาร 16: อาคารสโมสรนิสิต </option>
            <option value="16">อาคาร 17: อาคารเรียนนานาชาติ </option>
    </select></div>
    <div class="container">
    <div style="padding-bottom:10px;"></div>
    <div style="padding-left:5px;">
    <div id="noTower"></div>
    <div id="nameTower"></div>
    <div id="numFloor"></div>
    </div>
    </div>

    <div style="padding-bottom:15px;"></div>
    <div class="container">
        <div class="row">
                <div class="col-xs-4 col-md-4">
                        <p style="font-size: 18px;padding-left:3px;">เลือกชั้น</p>
                        <select class="form-control" id="selectElementId" onchange="getRoom()">
                            <option selected="selected" value="#">เลือกชั้น :</option>        
                        </select>
                </div>
                <div class="col-xs-8 col-md-8">
                       
                </div>
        </div>
        <div style="padding-bottom:15px;"></div>
        <div class="row">
                        
                        <div class="col-xs-12 col-md-9">
                            <div id="tableRoom"></div>
                        </div>
                        <div class="col-md-2"></div>
                </div>      
    </div>
    <div style="padding-bottom:10px;"></div>
    <blockquote style="padding-left: 10px;">
    <label style="font-size: 20px;"> | ตัวเลือกที่ 2 ></label>
    </blockquote>
    <div class="container">
        <!-- <div class="row"> -->
            <!-- <form class="form-inline"> -->
                    <!-- <div class="form-group"> -->
                            <p style="font-size: 18px;padding-left:3px;">หาห้อง</p>
                            <input type="text" class="form-control" id="search_room" placeholder="ใส่เลขห้อง เช่น 201">
                            <a class="btn btn-default" onClick="shhRoom()" >ห้องอยู่ไหน ?</a>
                            
                    <!-- </div> -->
            <!-- </form> -->
                            <div style="padding-bottom:12px;"></div>
                            <div id="shShowRoom"></div>
        <!-- </div> -->

    </div>
    <div style="padding-bottom:17px;"></div>
        <!-- <div class="container"> -->
        <center><a class="btn btn-default btn-lg" href="../.././">เลือกคณะอื่น</a></center>
        <!-- <center><a class="btn btn-default btn-lg" href="../.././index.html">เลือกคณะอื่น</a></center> -->
    <!-- </div>  -->
    <div style="padding-bottom:40px;"></div>
        

    <!-- jQuery (necessary for Bootstrap's JavaScript plugins) -->
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.12.4/jquery.min.js"></script>
    <!-- Include all compiled plugins (below), or include individual files as needed -->
    <script src="../../assets/js/bootstrap.min.js"></script>
    <script type="text/javascript" src="tower.json"></script>
    <script>
        
        var tower = JSON.parse(building);
        // alert(tower);
        // searchRoom(here);


        
        
        
        
        function searchRoom(here){
            var shf_show = document.getElementById("shShowRoom");
            shf_show.innerHTML = "";
            var first = 1;
            var tblf = null;
            
            for(i=0;i<tower.length;i++){
                // alert(tower[i][]);
                for(j=0;j<tower[i][3].length;j++){
                    for(k=0;k<tower[i][3][j].length;k++){
                        console.log(tower[i][1],tower[i][3][j][k][0])
                        if(tower[i][3][j][k][0] == here || tower[i][3][j][k][1] == here){
                                
                                if(first == 1){
                                first = 0;
                                tblf  = document.createElement('table');
                                tblf.style.width  = "100%";
                                tblf.className = "table table-bordered"; 
                                
                                var theadf = tblf.createTHead();
                                var the_trf = theadf.insertRow();
                                var the_tdf = the_trf.insertCell();
                                
                                the_tdf.appendChild(document.createTextNode("เจอ!ห้องแล้ว"));
                                var the_tdf = the_trf.insertCell();
                                the_tdf.appendChild(document.createTextNode("รายละเอียด"));
                                var the_tdf = the_trf.insertCell();
                                the_tdf.appendChild(document.createTextNode("เจอ!อาคารแล้ว"));
                                
                            }
                            var tbodyf = tblf.createTBody()    
                                    var trf = tbodyf.insertRow();
                                    for(var z = 0; z < 3; z++){     
                                        if(z==2){
                                            var tdf = trf.insertCell();
                                            tdf.appendChild(document.createTextNode(tower[i][1]));
                                        }
                                        else{
                                            var tdf = trf.insertCell();
                                            tdf.appendChild(document.createTextNode(tower[i][3][j][k][z]));
                                        }
                                                
                                                if(z==2 || z==1){ tdf.style.width = "42%"; }
                                                else{ tdf.style.width = "16%"; }
                                            tdf.style.border = "0px";
                                    }
                                    // td_end.appendChild(document.createTextNode(''));
                                    // td_end.style.width = "8%"
                                // }
                                
        
                            
                            

                        
                       
                   }
                }
               }
            }

            
            if(first == 1){

                shf_show.innerHTML = "";
                var noroomm = document.createTextNode("ไม่เจอห้องที่คุณต้องการ ครับ/ค่ะ"); 
                shf_show.appendChild(noroomm);
                shf_show.style.color = "#b33c00";
                
                

            }
            else{
                shf_show.appendChild(tblf);
            }
            
        }

        function detectDevice(tower,val){
        if (typeof window.orientation !== 'undefined'){
            // detect mobile
            document.getElementById("top").style.backgroundImage = "url(" + tower[val][4].replace('/img/eng/','/img/eng/mb/') + ")";
        }
        else{ 
            // detect window
            document.getElementById("top").style.backgroundImage = "url(" + tower[val][4] + ")";
        }
        }

        function changeOption(){
            // get detail's tower
            var e = document.getElementById("ddlViewBy");
            var val = e.options[e.selectedIndex].value;
            document.getElementById("noTower").innerHTML ='อาคารที่ : ' + tower[val][0];
            document.getElementById("nameTower").innerHTML ='ชื่ออาคาร : ' + tower[val][1];
            document.getElementById("numFloor").innerHTML ='มีจำนวนชั้น : ' + tower[val][2] + ' ชั้น';
            detectDevice(tower,val);
            // document.getElementById("top").style.backgroundImage = "url(" + tower[val][4].replace('/img/eng/','/img/eng/mb/') + ")";
            
            
            // get room in the floor
            document.getElementById("selectElementId").innerHTML = "";
            var min = 0,
            floor = 0,
            max = tower[val][3].length,
            select = document.getElementById('selectElementId');
            for (var i = min; i<max; i++){
            var opt = document.createElement('option');
            opt.value = i;
            floor = i+1
            opt.innerHTML = "ชั้นที่ " + floor;
            select.appendChild(opt);
            }
            getRoom();
            
            
          
        }
        function getRoom(){
            var detail_room = document.getElementById("showDetailRoom");
            var e_dep = document.getElementById("ddlViewBy");
            var val_dep = e_dep.options[e_dep.selectedIndex].value;
            var e_floor = document.getElementById("selectElementId");
            var val_floor = e_floor.options[e_floor.selectedIndex].value;
            shRoom = tower[val_dep][3][val_floor];
            
            var max = shRoom.length;
            if(max == 0){ tableNoRoom() }
            else{ tableCreate(max,shRoom); }
        }

        function tableNoRoom(){
          var table_room = document.getElementById("tableRoom");
          table_room.innerHTML = "";
          var noroom = document.createTextNode("ขออภัยในความไม่สะดวก");
          table_room.appendChild(noroom);
          noroom = document.createElement('br');
          table_room.appendChild(noroom);
          noroom = document.createTextNode("ข้อมูลภายในชั้นนี้ยังไม่มีการอัพเดท ครับ/ค่ะ");
          table_room.appendChild(noroom);
          table_room.style.color = "#b33c00";
        }
        
        // https://stackoverflow.com/questions/14643617/create-table-using-javascript
        function tableCreate(max,shRoom){
            var table_room = document.getElementById("tableRoom");
            table_room.innerHTML = "";
            var tbl  = document.createElement('table');
            tbl.style.width  = "100%";
            tbl.className = "table table-bordered"
            

            for(var i = -1; i < max; i++){
                var tbody = tbl.createTBody()
                var thead = tbl.createTHead()
                var tr = tbody.insertRow();
                var the_tr = thead.insertRow();
              
                for(var j = 0; j < 2; j++){

                        if(i == -1){
                          var the_td = the_tr.insertCell();
                          if(j==0){ the_td.appendChild(document.createTextNode("ห้อง"));}
                          else{ the_td.appendChild(document.createTextNode("รายละเอียด"));} 
                        }
                        else{
                          var td = tr.insertCell();
                          td.appendChild(document.createTextNode(shRoom[i][j]));
                            if(j==0){ td.style.width = "20%"; }
                            else{ td.style.width = "70%"; }
                        td.style.border = "0px";
                        }
                        
                        
                      
                }
                // td_end.appendChild(document.createTextNode(''));
                // td_end.style.width = "8%"
            }
            table_room.appendChild(tbl);
        }
        // tableCreate();

        function shhRoom(){
            var sh_Room = document.getElementById("search_room");
            sh_Room.innerHTML = searchRoom(sh_Room.value);
            // searchRoom(document.getElementById("search_room").value);
        }
        
    </script>
  </body>
</html>
